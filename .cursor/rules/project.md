–û—Ç–ª–∏—á–Ω–æ, –≤–æ—Ç **–µ–¥–∏–Ω—ã–π `project-guidelines.md` —Ñ–∞–π–ª**, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–µ–∫—Ç—É NestJS —Å Fastify, Prisma –∏ PostgreSQL ‚Äî –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

---

### üìÅ `project-guidelines.md`

```markdown
# üì¶ Project Guidelines: NestJS Monolith with Fastify, Prisma, PostgreSQL

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **NestJS** (TypeScript)
- –°–µ—Ä–≤–µ—Ä ‚Äî **Fastify**
- ORM ‚Äî **Prisma**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî **PostgreSQL**
- –ü—Ä–æ–µ–∫—Ç ‚Äî **–º–æ–Ω–æ–ª–∏—Ç**, –Ω–æ —Å **–º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π** (–ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture)
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º—ã–π REST API: `/api/v1/...`, `/api/v2/...`
- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—á–∏—Å—Ç—ã–º, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –∏ —á–∏—Ç–∞–µ–º—ã–º**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–Ω—Ü–∏–ø **SRP (Single Responsibility Principle)**

## üîß –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@nestjs/platform-fastify` –≤–º–µ—Å—Ç–æ Express
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `@nestjs/config` –∏ `.env`
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å Prisma:
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Prisma CLI –∏ Client
  - –°–æ–∑–¥–∞—Ç—å `schema.prisma` –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `PrismaService` –≤ NestJS
- –î–æ–±–∞–≤–∏—Ç—å Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —á–µ—Ä–µ–∑ `@nestjs/swagger`

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```

src/
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ <feature>/
‚îÇ       ‚îî‚îÄ‚îÄ v1/
‚îÇ           ‚îú‚îÄ‚îÄ <feature>.controller.ts
‚îÇ           ‚îú‚îÄ‚îÄ <feature>.service.ts
‚îÇ           ‚îú‚îÄ‚îÄ <feature>.module.ts
‚îÇ           ‚îú‚îÄ‚îÄ dto/
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ create-<feature>.dto.ts
‚îÇ           ‚îú‚îÄ‚îÄ entities/
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ <feature>.entity.ts
‚îÇ           ‚îî‚îÄ‚îÄ repository/
‚îÇ               ‚îî‚îÄ‚îÄ <feature>.repository.ts
‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îú‚îÄ‚îÄ filters/
‚îÇ   ‚îú‚îÄ‚îÄ interceptors/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ prisma.service.ts
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma

```

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Modular Monolith** —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ **Clean Architecture**
- –õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏:
  - **Controllers** ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å API
  - **Services** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - **Repositories** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Prisma
  - **DTO** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
  - **Entities** ‚Äî –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Dependency Injection** —á–µ—Ä–µ–∑ NestJS-–º–µ—Ö–∞–Ω–∏–∑–º—ã

## ‚öôÔ∏è –†–∞–±–æ—Ç–∞ —Å Prisma –∏ PostgreSQL

- –í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `schema.prisma`
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑:
```

npx prisma migrate dev --name init

````
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ Prisma –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:
```ts
await this.prisma.$transaction(async (tx) => {
  // CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
});
````

* –†–∞–∑–¥–µ–ª–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ `*.repository.ts`

## üß™ Swagger (OpenAPI)

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:

  ```ts
  const config = new DocumentBuilder()
    .setTitle('API')
    .setVersion('1.0')
    .build();

  const document = SwaggerModule.createDocument(app, config);
  SwaggerModule.setup('api-docs', app, document);
  ```
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã:

  * `@ApiTags`
  * `@ApiOperation`
  * `@ApiResponse`
  * `@ApiProperty` –≤ DTO

## ‚úÖ DTO –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `class-validator` –∏ `class-transformer` –¥–ª—è DTO
* –ü—Ä–∏–º–µ—Ä DTO:

  ```ts
  export class CreateUserDto {
    @IsEmail()
    email: string;

    @MinLength(6)
    password: string;
  }
  ```
* DTO —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤ `dto/`, –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç —Å—É—â–Ω–æ—Å—Ç–µ–π

## üìå –ü—Ä–∏–º–µ—Ä CRUD —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π

* –ü—Ä–∏–º–µ—Ä: —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–æ—Ñ–∏–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

  ```ts
  await this.prisma.$transaction(async (tx) => {
    const user = await tx.user.create({ data: { ... } });
    await tx.profile.create({ data: { userId: user.id, ... } });
  });
  ```

## üß© –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

* –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `pino` (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ Fastify)
* –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ (Exception filters)
* –ò–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä—ã –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS –∏ Security middleware (Helmet –∏ –¥—Ä.)
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env` –∏ `ConfigService` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏

## üóÇ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

* –ö–∞–∂–¥–∞—è –≤–µ—Ä—Å–∏—è API —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å (`v1`, `v2`, ...)
* –ü—Ä–∏–º–µ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤:

  ```
  /api/v1/users
  /api/v2/users
  ```

---

**üéØ –¶–µ–ª—å:** —Å–æ–∑–¥–∞—Ç—å —á–∏—Å—Ç—ã–π, —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π backend-–ø—Ä–æ–µ–∫—Ç —Å –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –∫–æ–¥–æ–º, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.

```

---
